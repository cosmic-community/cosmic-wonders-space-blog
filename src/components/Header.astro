---
// src/components/Header.astro
import Navigation from './Navigation.astro';
---

<header class="sticky top-0 z-40 backdrop-blur-xl bg-indigo-950/80 border-b border-white/10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-3 group">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cosmic-500 to-space-500 flex items-center justify-center shadow-cosmic group-hover:shadow-cosmic-lg transition-shadow duration-300">
          <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
          </svg>
        </div>
        <span class="text-xl font-bold bg-gradient-to-r from-white to-cosmic-200 bg-clip-text text-transparent">
          Cosmic Wonders
        </span>
      </a>
      
      <!-- Navigation -->
      <Navigation />
    </div>
  </div>
</header>

<!-- Mobile menu - rendered outside header to avoid z-index stacking context issues -->
<div id="mobile-menu" class="hidden fixed inset-0 z-[100] md:hidden">
  <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" id="mobile-menu-overlay"></div>
  <div class="fixed top-0 right-0 w-72 h-full bg-indigo-950 shadow-2xl transform transition-transform duration-300">
    <div class="p-6">
      <button
        id="mobile-menu-close"
        class="absolute top-4 right-4 p-2 rounded-lg text-white/70 hover:text-white hover:bg-white/10 transition-colors"
        aria-label="Close menu"
      >
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <nav class="mt-12 flex flex-col gap-2">
        <a
          href="/"
          class="px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 text-white/70 hover:text-white hover:bg-white/5"
        >
          Home
        </a>
        <a
          href="/about"
          class="px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 text-white/70 hover:text-white hover:bg-white/5"
        >
          About
        </a>
        <a
          href="/categories"
          class="px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 text-white/70 hover:text-white hover:bg-white/5"
        >
          Categories
        </a>
        <a
          href="/authors"
          class="px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 text-white/70 hover:text-white hover:bg-white/5"
        >
          Authors
        </a>
      </nav>
    </div>
  </div>
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const menuButton = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    const menuClose = document.getElementById('mobile-menu-close');
    const menuOverlay = document.getElementById('mobile-menu-overlay');
    
    function openMenu() {
      if (menu) {
        menu.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }
    }
    
    function closeMenu() {
      if (menu) {
        menu.classList.add('hidden');
        document.body.style.overflow = '';
      }
    }
    
    if (menuButton) menuButton.addEventListener('click', openMenu);
    if (menuClose) menuClose.addEventListener('click', closeMenu);
    if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);
    
    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menu && !menu.classList.contains('hidden')) {
        closeMenu();
      }
    });
  });
</script>